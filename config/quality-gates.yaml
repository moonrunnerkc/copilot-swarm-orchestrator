# Quality gates for generated projects.
# Keep this deterministic. If you relax a gate, do it intentionally.

enabled: true
failOnIssues: true

# When true, swarm can auto-add follow-up steps to fix gate failures.
# The final gates still run as hard checks.
autoAddRefactorStepOnDuplicateBlocks: true
autoAddReadmeTruthStepOnReadmeClaims: true
autoAddScaffoldFixStepOnScaffoldDefaults: true
autoAddConfigFixStepOnHardcodedConfig: true

gates:
  scaffoldDefaults:
    enabled: true

  duplicateBlocks:
    enabled: true
    minLines: 12
    maxOccurrences: 2
    maxFindings: 20

  hardcodedConfig:
    enabled: true

  readmeClaims:
    enabled: true

  testIsolation:
    enabled: true

  # Runtime checks run the project's own tests, linter, and security audit.
  # Disabled by default because they require the target project to have
  # npm scripts and dependencies installed. Enable for production swarm runs.
  runtimeChecks:
    enabled: false
    retries: 1
    runTests: true
    runLint: true
    runAudit: true
    timeoutMs: 120000
